{
  "$schema": "https://json-schema.org/draft-07/schema",
  "$id": "https://digidex.tech/ntags.schema.json",
  "title": "NFC Tags Application Model Schema",
  "description": "Models for managing NFC Tags.",
  "type": "object",
  "definitions": {
    "NFCTag": {
      "type": "object",
      "properties": {
        "serial_number": {
          "type": "string",
          "maxLength": 32
        },
        "integrated_circuit": {
          "type": "string",
          "enum": ["213", "215", "216"]
        },
        "active": {
          "type": "boolean"
        },
        "user": {
          "type": ["string", "null"],
          "description": "Foreign key reference to User"
        },
        "design": {
          "type": ["string", "null"],
          "description": "Foreign key reference to NFCTagDesign"
        },
        "label": {
          "type": ["string", "null"],
          "maxLength": 64
        },
        "metadata": {
          "type": "string",
          "contentEncoding": "base64",
          "maxLength": 924
        },
        "content_type": {
          "type": "string",
          "description": "Content type reference for generic foreign key"
        },
        "object_id": {
          "type": "integer",
          "description": "Primary key of the related object"
        },
        "content_object": {
          "type": "string",
          "description": "Generic foreign key link"
        }
      },
      "required": ["serial_number", "integrated_circuit", "active"]
    },
    "NFCTagScan": {
      "type": "object",
      "properties": {
        "nfc_tag": {
          "type": "string",
          "description": "Foreign key reference to NFCTag"
        },
        "counter": {
          "type": "integer",
          "minimum": 0
        },
        "scanned_by": {
          "type": ["string", "null"],
          "description": "Foreign key reference to User"
        },
        "scanned_at": {
          "type": "string",
          "format": "date-time"
        }
      },
      "required": ["nfc_tag", "counter", "scanned_at"]
    },
    "NFCTagDesign": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "maxLength": 64
        },
        "description": {
          "type": ["string", "null"]
        },
        "designer": {
          "type": ["string", "null"],
          "description": "Foreign key reference to User"
        }
      },
      "required": ["name"]
    },
    "NFCTagDesignGalleryImage": {
      "type": "object",
      "properties": {
        "design": {
          "type": "string",
          "description": "Foreign key reference to NFCTagDesign"
        },
        "image": {
          "type": "string",
          "contentEncoding": "base64",
          "description": "Image binary data"
        }
      },
      "required": ["design", "image"]
    }
  },
  "properties": {
    "nfc-tags": { "$ref": "#/definitions/NFCTag" },
    "nfc-tag-designs": { "$ref": "#/definitions/NFCTagDesign" },
    "nfc-tag-scans": { "$ref": "#/definitions/NFCTagScan" },
    "nfc-tag-design-gallery-images": { "$ref": "#/definitions/NFCTagDesignGalleryImage" }
  }
}
