{
  "$schema": "https://json-schema.org/draft-07/schema",
  "$id": "https://digidex.tech/nfc.schema.json",
  "title": "Near Field Communication",
  "description": "An NFC-Tag used for mapping a physical-object to an external system like a CMS.",
  "type": "object",
  "definitions": {
    "NfcTagType": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "maxLength": 255
        },
        "description": {
          "type": ["string", "null"]
        },
        "created_at": {
          "type": "string",
          "format": "date-time"
        },
        "last_modified": {
          "type": "string",
          "format": "date-time"
        }
      },
      "required": ["name", "created_at", "last_modified"]
    },
    "NfcTag": {
      "type": "object",
      "properties": {
        "serial_number": {
          "type": "string",
          "maxLength": 32
        },
        "user": {
          "type": ["string", "null"],
          "description": "Foreign key reference to User"
        },
        "nfc_tag_type": {
          "type": "string",
          "description": "Foreign key reference to NfcTagType"
        },
        "active": {
          "type": "boolean"
        },
        "created_at": {
          "type": "string",
          "format": "date-time"
        },
        "last_modified": {
          "type": "string",
          "format": "date-time"
        },
        "content_type": {
          "type": ["string", "null"],
          "description": "Content type for GenericForeignKey"
        },
        "object_id": {
          "type": ["integer", "null"],
          "description": "Object ID for GenericForeignKey"
        }
      },
      "required": ["serial_number", "created_at", "last_modified"]
    },
    "NfcTagScan": {
      "type": "object",
      "properties": {
        "nfc_tag": {
          "type": "string",
          "description": "Foreign key reference to NfcTag"
        },
        "counter": {
          "type": "integer",
          "minimum": 0
        },
        "scanned_by": {
          "type": ["string", "null"],
          "description": "Foreign key reference to User"
        },
        "scanned_at": {
          "type": "string",
          "format": "date-time"
        }
      },
      "required": ["nfc_tag", "counter", "scanned_at"]
    },
    "NfcTagMemory": {
      "type": "object",
      "properties": {
        "uuid": {
          "type": "string",
          "format": "uuid"
        },
        "nfc_tag": {
          "type": "string",
          "description": "Foreign key reference to NfcTag"
        },
        "integrated_circuit": {
          "type": "string",
          "enum": ["213", "215", "216"]
        },
        "memory": {
          "type": "string",
          "maxLength": 4096
        },
        "created_at": {
          "type": "string",
          "format": "date-time"
        },
        "last_modified": {
          "type": "string",
          "format": "date-time"
        }
      },
      "required": ["uuid", "nfc_tag", "memory", "created_at", "last_modified"]
    }
  },
  "properties": {
    "nfc_tag": { "$ref": "#/definitions/NfcTag" },
    "nfc_tag_type": { "$ref": "#/definitions/NfcTagType" },
    "nfc_tag_scan": { "$ref": "#/definitions/NfcTagScan" }
  }
}
  